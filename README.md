# 接口调度服务

一个基于 Quartz.NET 的轻量级接口调度服务，用于通过计划任务调用 HTTP 接口。

## 功能特性

- 简单配置多个 HTTP 接口调用任务
- 基于 Quartz.NET 的可靠调度引擎
- 支持标准的 6 位 Cron 表达式
- 自动记录任务执行日志
- 支持 Windows 服务安装/卸载

## 快速开始

### 安装服务

1. 下载最新的 [Release 版本](https://github.com/buzhizhe/ApiScheduleTask/releases/)
2. 解压到目标目录
3. 运行 `install.bat` 安装服务
4. 修改 `bin/crontab.txt` 配置您的任务

### 卸载服务

运行 `uninstall.bat` 即可卸载服务。

## 任务配置

在 `bin/crontab.txt` 文件中配置您的任务，每行一个任务，格式为：

```
<Cron表达式> <HTTP URL>
```

示例：
```
0 0/1 * * * ? http://127.0.0.1:8001/api/task/sendmsg
0 2 * * * ? http://127.0.0.1:8001/api/task/sendmail
```

## Cron 表达式指南

Quartz.NET 使用 6 位 Cron 表达式（不同于 Linux 的 5位），格式如下：

```
秒 分 时 日 月 星期
```

### 常用表达式示例

| 表达式                   | 含义                     |
|-------------------------|-------------------------|
| `0 0/1 * * * ?`        | 每分钟执行一次          |
| `0 0 0 * * ?`          | 每天午夜执行            |
| `0 30 9 * * ?`         | 每天 09:30 执行         |
| `0 0 12 1 * ?`         | 每月1日中午12点执行     |
| `0 0 12 ? * MON-FRI`   | 周一到周五中午12点执行  |

### 特殊字符说明

| 字符 | 含义                                                      |
|------|----------------------------------------------------------|
| `*`  | 任意值                                                   |
| `?`  | 无特定值（用于"日"或"星期"字段）                         |
| `-`  | 范围，如`10-12`表示 10 到 12                             |
| `,`  | 列表，如`MON,WED,FRI`                                    |
| `/`  | 步进，如`0/15`表示从0开始每15个单位                      |

> 推荐使用 [CronMaker](http://www.cronmaker.com/) 在线工具生成表达式

## 日志记录

任务执行日志保存在 `bin\log` 目录下，文件名格式为 `job_[index]_yyyyMMdd.log`。

## 开发

如需自行构建：

```bash
dotnet build
dotnet publish -c Release
```

## 贡献

欢迎提交 Issue 和 Pull Request。

## 许可证

[MIT](LICENSE)
